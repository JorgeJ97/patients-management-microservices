{"version":"tree-0.1","tree":{"id":"App","path":"","children":{"localstack":{"id":"localstack","path":"localstack","children":{"PatientsManagementVpc":{"id":"PatientsManagementVpc","path":"localstack/PatientsManagementVpc","children":{"Resource":{"id":"Resource","path":"localstack/PatientsManagementVpc/Resource","attributes":{"aws:cdk:cloudformation:type":"AWS::EC2::VPC","aws:cdk:cloudformation:props":{"cidrBlock":"10.0.0.0/16","enableDnsHostnames":true,"enableDnsSupport":true,"instanceTenancy":"default","tags":[{"key":"Name","value":"PatientsManagementVpc"}]}},"constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.CfnVPC","version":"2.195.0"}},"PublicSubnet1":{"id":"PublicSubnet1","path":"localstack/PatientsManagementVpc/PublicSubnet1","children":{"Subnet":{"id":"Subnet","path":"localstack/PatientsManagementVpc/PublicSubnet1/Subnet","attributes":{"aws:cdk:cloudformation:type":"AWS::EC2::Subnet","aws:cdk:cloudformation:props":{"availabilityZone":{"Fn::Select":[0,{"Fn::GetAZs":""}]},"cidrBlock":"10.0.0.0/18","mapPublicIpOnLaunch":true,"tags":[{"key":"aws-cdk:subnet-name","value":"Public"},{"key":"aws-cdk:subnet-type","value":"Public"},{"key":"Name","value":"localstack/PatientsManagementVpc/PublicSubnet1"}],"vpcId":{"Ref":"PatientsManagementVpc9D7C6C04"}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.CfnSubnet","version":"2.195.0"}},"Acl":{"id":"Acl","path":"localstack/PatientsManagementVpc/PublicSubnet1/Acl","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.195.0","metadata":[]}},"RouteTable":{"id":"RouteTable","path":"localstack/PatientsManagementVpc/PublicSubnet1/RouteTable","attributes":{"aws:cdk:cloudformation:type":"AWS::EC2::RouteTable","aws:cdk:cloudformation:props":{"tags":[{"key":"Name","value":"localstack/PatientsManagementVpc/PublicSubnet1"}],"vpcId":{"Ref":"PatientsManagementVpc9D7C6C04"}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.CfnRouteTable","version":"2.195.0"}},"RouteTableAssociation":{"id":"RouteTableAssociation","path":"localstack/PatientsManagementVpc/PublicSubnet1/RouteTableAssociation","attributes":{"aws:cdk:cloudformation:type":"AWS::EC2::SubnetRouteTableAssociation","aws:cdk:cloudformation:props":{"routeTableId":{"Ref":"PatientsManagementVpcPublicSubnet1RouteTable47E438CB"},"subnetId":{"Ref":"PatientsManagementVpcPublicSubnet1Subnet65B50443"}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.CfnSubnetRouteTableAssociation","version":"2.195.0"}},"DefaultRoute":{"id":"DefaultRoute","path":"localstack/PatientsManagementVpc/PublicSubnet1/DefaultRoute","attributes":{"aws:cdk:cloudformation:type":"AWS::EC2::Route","aws:cdk:cloudformation:props":{"destinationCidrBlock":"0.0.0.0/0","gatewayId":{"Ref":"PatientsManagementVpcIGW3FA6B428"},"routeTableId":{"Ref":"PatientsManagementVpcPublicSubnet1RouteTable47E438CB"}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.CfnRoute","version":"2.195.0"}},"EIP":{"id":"EIP","path":"localstack/PatientsManagementVpc/PublicSubnet1/EIP","attributes":{"aws:cdk:cloudformation:type":"AWS::EC2::EIP","aws:cdk:cloudformation:props":{"domain":"vpc","tags":[{"key":"Name","value":"localstack/PatientsManagementVpc/PublicSubnet1"}]}},"constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.CfnEIP","version":"2.195.0"}},"NATGateway":{"id":"NATGateway","path":"localstack/PatientsManagementVpc/PublicSubnet1/NATGateway","attributes":{"aws:cdk:cloudformation:type":"AWS::EC2::NatGateway","aws:cdk:cloudformation:props":{"allocationId":{"Fn::GetAtt":["PatientsManagementVpcPublicSubnet1EIP0B2D3325","AllocationId"]},"subnetId":{"Ref":"PatientsManagementVpcPublicSubnet1Subnet65B50443"},"tags":[{"key":"Name","value":"localstack/PatientsManagementVpc/PublicSubnet1"}]}},"constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.CfnNatGateway","version":"2.195.0"}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.PublicSubnet","version":"2.195.0","metadata":[]}},"PublicSubnet2":{"id":"PublicSubnet2","path":"localstack/PatientsManagementVpc/PublicSubnet2","children":{"Subnet":{"id":"Subnet","path":"localstack/PatientsManagementVpc/PublicSubnet2/Subnet","attributes":{"aws:cdk:cloudformation:type":"AWS::EC2::Subnet","aws:cdk:cloudformation:props":{"availabilityZone":{"Fn::Select":[1,{"Fn::GetAZs":""}]},"cidrBlock":"10.0.64.0/18","mapPublicIpOnLaunch":true,"tags":[{"key":"aws-cdk:subnet-name","value":"Public"},{"key":"aws-cdk:subnet-type","value":"Public"},{"key":"Name","value":"localstack/PatientsManagementVpc/PublicSubnet2"}],"vpcId":{"Ref":"PatientsManagementVpc9D7C6C04"}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.CfnSubnet","version":"2.195.0"}},"Acl":{"id":"Acl","path":"localstack/PatientsManagementVpc/PublicSubnet2/Acl","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.195.0","metadata":[]}},"RouteTable":{"id":"RouteTable","path":"localstack/PatientsManagementVpc/PublicSubnet2/RouteTable","attributes":{"aws:cdk:cloudformation:type":"AWS::EC2::RouteTable","aws:cdk:cloudformation:props":{"tags":[{"key":"Name","value":"localstack/PatientsManagementVpc/PublicSubnet2"}],"vpcId":{"Ref":"PatientsManagementVpc9D7C6C04"}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.CfnRouteTable","version":"2.195.0"}},"RouteTableAssociation":{"id":"RouteTableAssociation","path":"localstack/PatientsManagementVpc/PublicSubnet2/RouteTableAssociation","attributes":{"aws:cdk:cloudformation:type":"AWS::EC2::SubnetRouteTableAssociation","aws:cdk:cloudformation:props":{"routeTableId":{"Ref":"PatientsManagementVpcPublicSubnet2RouteTable6EE70963"},"subnetId":{"Ref":"PatientsManagementVpcPublicSubnet2Subnet9C8942F5"}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.CfnSubnetRouteTableAssociation","version":"2.195.0"}},"DefaultRoute":{"id":"DefaultRoute","path":"localstack/PatientsManagementVpc/PublicSubnet2/DefaultRoute","attributes":{"aws:cdk:cloudformation:type":"AWS::EC2::Route","aws:cdk:cloudformation:props":{"destinationCidrBlock":"0.0.0.0/0","gatewayId":{"Ref":"PatientsManagementVpcIGW3FA6B428"},"routeTableId":{"Ref":"PatientsManagementVpcPublicSubnet2RouteTable6EE70963"}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.CfnRoute","version":"2.195.0"}},"EIP":{"id":"EIP","path":"localstack/PatientsManagementVpc/PublicSubnet2/EIP","attributes":{"aws:cdk:cloudformation:type":"AWS::EC2::EIP","aws:cdk:cloudformation:props":{"domain":"vpc","tags":[{"key":"Name","value":"localstack/PatientsManagementVpc/PublicSubnet2"}]}},"constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.CfnEIP","version":"2.195.0"}},"NATGateway":{"id":"NATGateway","path":"localstack/PatientsManagementVpc/PublicSubnet2/NATGateway","attributes":{"aws:cdk:cloudformation:type":"AWS::EC2::NatGateway","aws:cdk:cloudformation:props":{"allocationId":{"Fn::GetAtt":["PatientsManagementVpcPublicSubnet2EIP0E9EAC7E","AllocationId"]},"subnetId":{"Ref":"PatientsManagementVpcPublicSubnet2Subnet9C8942F5"},"tags":[{"key":"Name","value":"localstack/PatientsManagementVpc/PublicSubnet2"}]}},"constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.CfnNatGateway","version":"2.195.0"}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.PublicSubnet","version":"2.195.0","metadata":[]}},"PrivateSubnet1":{"id":"PrivateSubnet1","path":"localstack/PatientsManagementVpc/PrivateSubnet1","children":{"Subnet":{"id":"Subnet","path":"localstack/PatientsManagementVpc/PrivateSubnet1/Subnet","attributes":{"aws:cdk:cloudformation:type":"AWS::EC2::Subnet","aws:cdk:cloudformation:props":{"availabilityZone":{"Fn::Select":[0,{"Fn::GetAZs":""}]},"cidrBlock":"10.0.128.0/18","mapPublicIpOnLaunch":false,"tags":[{"key":"aws-cdk:subnet-name","value":"Private"},{"key":"aws-cdk:subnet-type","value":"Private"},{"key":"Name","value":"localstack/PatientsManagementVpc/PrivateSubnet1"}],"vpcId":{"Ref":"PatientsManagementVpc9D7C6C04"}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.CfnSubnet","version":"2.195.0"}},"Acl":{"id":"Acl","path":"localstack/PatientsManagementVpc/PrivateSubnet1/Acl","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.195.0","metadata":[]}},"RouteTable":{"id":"RouteTable","path":"localstack/PatientsManagementVpc/PrivateSubnet1/RouteTable","attributes":{"aws:cdk:cloudformation:type":"AWS::EC2::RouteTable","aws:cdk:cloudformation:props":{"tags":[{"key":"Name","value":"localstack/PatientsManagementVpc/PrivateSubnet1"}],"vpcId":{"Ref":"PatientsManagementVpc9D7C6C04"}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.CfnRouteTable","version":"2.195.0"}},"RouteTableAssociation":{"id":"RouteTableAssociation","path":"localstack/PatientsManagementVpc/PrivateSubnet1/RouteTableAssociation","attributes":{"aws:cdk:cloudformation:type":"AWS::EC2::SubnetRouteTableAssociation","aws:cdk:cloudformation:props":{"routeTableId":{"Ref":"PatientsManagementVpcPrivateSubnet1RouteTable2CE76BEB"},"subnetId":{"Ref":"PatientsManagementVpcPrivateSubnet1Subnet06A89DF4"}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.CfnSubnetRouteTableAssociation","version":"2.195.0"}},"DefaultRoute":{"id":"DefaultRoute","path":"localstack/PatientsManagementVpc/PrivateSubnet1/DefaultRoute","attributes":{"aws:cdk:cloudformation:type":"AWS::EC2::Route","aws:cdk:cloudformation:props":{"destinationCidrBlock":"0.0.0.0/0","natGatewayId":{"Ref":"PatientsManagementVpcPublicSubnet1NATGateway8019510E"},"routeTableId":{"Ref":"PatientsManagementVpcPrivateSubnet1RouteTable2CE76BEB"}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.CfnRoute","version":"2.195.0"}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.PrivateSubnet","version":"2.195.0","metadata":[]}},"PrivateSubnet2":{"id":"PrivateSubnet2","path":"localstack/PatientsManagementVpc/PrivateSubnet2","children":{"Subnet":{"id":"Subnet","path":"localstack/PatientsManagementVpc/PrivateSubnet2/Subnet","attributes":{"aws:cdk:cloudformation:type":"AWS::EC2::Subnet","aws:cdk:cloudformation:props":{"availabilityZone":{"Fn::Select":[1,{"Fn::GetAZs":""}]},"cidrBlock":"10.0.192.0/18","mapPublicIpOnLaunch":false,"tags":[{"key":"aws-cdk:subnet-name","value":"Private"},{"key":"aws-cdk:subnet-type","value":"Private"},{"key":"Name","value":"localstack/PatientsManagementVpc/PrivateSubnet2"}],"vpcId":{"Ref":"PatientsManagementVpc9D7C6C04"}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.CfnSubnet","version":"2.195.0"}},"Acl":{"id":"Acl","path":"localstack/PatientsManagementVpc/PrivateSubnet2/Acl","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.195.0","metadata":[]}},"RouteTable":{"id":"RouteTable","path":"localstack/PatientsManagementVpc/PrivateSubnet2/RouteTable","attributes":{"aws:cdk:cloudformation:type":"AWS::EC2::RouteTable","aws:cdk:cloudformation:props":{"tags":[{"key":"Name","value":"localstack/PatientsManagementVpc/PrivateSubnet2"}],"vpcId":{"Ref":"PatientsManagementVpc9D7C6C04"}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.CfnRouteTable","version":"2.195.0"}},"RouteTableAssociation":{"id":"RouteTableAssociation","path":"localstack/PatientsManagementVpc/PrivateSubnet2/RouteTableAssociation","attributes":{"aws:cdk:cloudformation:type":"AWS::EC2::SubnetRouteTableAssociation","aws:cdk:cloudformation:props":{"routeTableId":{"Ref":"PatientsManagementVpcPrivateSubnet2RouteTable7555820E"},"subnetId":{"Ref":"PatientsManagementVpcPrivateSubnet2Subnet86CFD33A"}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.CfnSubnetRouteTableAssociation","version":"2.195.0"}},"DefaultRoute":{"id":"DefaultRoute","path":"localstack/PatientsManagementVpc/PrivateSubnet2/DefaultRoute","attributes":{"aws:cdk:cloudformation:type":"AWS::EC2::Route","aws:cdk:cloudformation:props":{"destinationCidrBlock":"0.0.0.0/0","natGatewayId":{"Ref":"PatientsManagementVpcPublicSubnet2NATGateway96A8B805"},"routeTableId":{"Ref":"PatientsManagementVpcPrivateSubnet2RouteTable7555820E"}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.CfnRoute","version":"2.195.0"}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.PrivateSubnet","version":"2.195.0","metadata":[]}},"IGW":{"id":"IGW","path":"localstack/PatientsManagementVpc/IGW","attributes":{"aws:cdk:cloudformation:type":"AWS::EC2::InternetGateway","aws:cdk:cloudformation:props":{"tags":[{"key":"Name","value":"PatientsManagementVpc"}]}},"constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.CfnInternetGateway","version":"2.195.0"}},"VPCGW":{"id":"VPCGW","path":"localstack/PatientsManagementVpc/VPCGW","attributes":{"aws:cdk:cloudformation:type":"AWS::EC2::VPCGatewayAttachment","aws:cdk:cloudformation:props":{"internetGatewayId":{"Ref":"PatientsManagementVpcIGW3FA6B428"},"vpcId":{"Ref":"PatientsManagementVpc9D7C6C04"}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.CfnVPCGatewayAttachment","version":"2.195.0"}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.Vpc","version":"2.195.0","metadata":[]}},"PatientManagementCluster":{"id":"PatientManagementCluster","path":"localstack/PatientManagementCluster","children":{"Resource":{"id":"Resource","path":"localstack/PatientManagementCluster/Resource","attributes":{"aws:cdk:cloudformation:type":"AWS::ECS::Cluster","aws:cdk:cloudformation:props":{}},"constructInfo":{"fqn":"aws-cdk-lib.aws_ecs.CfnCluster","version":"2.195.0"}},"DefaultServiceDiscoveryNamespace":{"id":"DefaultServiceDiscoveryNamespace","path":"localstack/PatientManagementCluster/DefaultServiceDiscoveryNamespace","children":{"Resource":{"id":"Resource","path":"localstack/PatientManagementCluster/DefaultServiceDiscoveryNamespace/Resource","attributes":{"aws:cdk:cloudformation:type":"AWS::ServiceDiscovery::PrivateDnsNamespace","aws:cdk:cloudformation:props":{"name":"patients-management","vpc":{"Ref":"PatientsManagementVpc9D7C6C04"}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_servicediscovery.CfnPrivateDnsNamespace","version":"2.195.0"}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_servicediscovery.PrivateDnsNamespace","version":"2.195.0","metadata":[]}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_ecs.Cluster","version":"2.195.0","metadata":[]}},"PatientsServiceDB":{"id":"PatientsServiceDB","path":"localstack/PatientsServiceDB","children":{"SubnetGroup":{"id":"SubnetGroup","path":"localstack/PatientsServiceDB/SubnetGroup","children":{"Default":{"id":"Default","path":"localstack/PatientsServiceDB/SubnetGroup/Default","attributes":{"aws:cdk:cloudformation:type":"AWS::RDS::DBSubnetGroup","aws:cdk:cloudformation:props":{"dbSubnetGroupDescription":"Subnet group for PatientsServiceDB database","subnetIds":[{"Ref":"PatientsManagementVpcPrivateSubnet1Subnet06A89DF4"},{"Ref":"PatientsManagementVpcPrivateSubnet2Subnet86CFD33A"}]}},"constructInfo":{"fqn":"aws-cdk-lib.aws_rds.CfnDBSubnetGroup","version":"2.195.0"}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_rds.SubnetGroup","version":"2.195.0","metadata":[]}},"SecurityGroup":{"id":"SecurityGroup","path":"localstack/PatientsServiceDB/SecurityGroup","children":{"Resource":{"id":"Resource","path":"localstack/PatientsServiceDB/SecurityGroup/Resource","attributes":{"aws:cdk:cloudformation:type":"AWS::EC2::SecurityGroup","aws:cdk:cloudformation:props":{"groupDescription":"Security group for PatientsServiceDB database","securityGroupEgress":[{"cidrIp":"0.0.0.0/0","description":"Allow all outbound traffic by default","ipProtocol":"-1"}],"vpcId":{"Ref":"PatientsManagementVpc9D7C6C04"}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.CfnSecurityGroup","version":"2.195.0"}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.SecurityGroup","version":"2.195.0","metadata":[]}},"Secret":{"id":"Secret","path":"localstack/PatientsServiceDB/Secret","children":{"Resource":{"id":"Resource","path":"localstack/PatientsServiceDB/Secret/Resource","attributes":{"aws:cdk:cloudformation:type":"AWS::SecretsManager::Secret","aws:cdk:cloudformation:props":{"description":{"Fn::Join":["",["Generated by the CDK for stack: ",{"Ref":"AWS::StackName"}]]},"generateSecretString":{"passwordLength":30,"secretStringTemplate":"{\"username\":\"admin_user\"}","generateStringKey":"password","excludeCharacters":" %+~`#$&*()|[]{}:;<>?!'/@\"\\"}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_secretsmanager.CfnSecret","version":"2.195.0"}},"Attachment":{"id":"Attachment","path":"localstack/PatientsServiceDB/Secret/Attachment","children":{"Resource":{"id":"Resource","path":"localstack/PatientsServiceDB/Secret/Attachment/Resource","attributes":{"aws:cdk:cloudformation:type":"AWS::SecretsManager::SecretTargetAttachment","aws:cdk:cloudformation:props":{"secretId":{"Ref":"localstackPatientsServiceDBSecret14FF9EF43fdaad7efa858a3daf9490cf0a702aeb"},"targetId":{"Ref":"PatientsServiceDB9E9CC416"},"targetType":"AWS::RDS::DBInstance"}},"constructInfo":{"fqn":"aws-cdk-lib.aws_secretsmanager.CfnSecretTargetAttachment","version":"2.195.0"}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_secretsmanager.SecretTargetAttachment","version":"2.195.0","metadata":[]}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_rds.DatabaseSecret","version":"2.195.0","metadata":[]}},"Resource":{"id":"Resource","path":"localstack/PatientsServiceDB/Resource","attributes":{"aws:cdk:cloudformation:type":"AWS::RDS::DBInstance","aws:cdk:cloudformation:props":{"allocatedStorage":"20","copyTagsToSnapshot":true,"dbInstanceClass":"db.t2.micro","dbName":"patients-service-db","dbSubnetGroupName":{"Ref":"PatientsServiceDBSubnetGroup2A87DA2C"},"engine":"postgres","engineVersion":"17","masterUsername":"admin_user","masterUserPassword":{"Fn::Join":["",["{{resolve:secretsmanager:",{"Ref":"localstackPatientsServiceDBSecret14FF9EF43fdaad7efa858a3daf9490cf0a702aeb"},":SecretString:password::}}"]]},"storageType":"gp2","vpcSecurityGroups":[{"Fn::GetAtt":["PatientsServiceDBSecurityGroup03A19A4C","GroupId"]}]}},"constructInfo":{"fqn":"aws-cdk-lib.aws_rds.CfnDBInstance","version":"2.195.0"}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_rds.DatabaseInstance","version":"2.195.0","metadata":[]}},"AuthServiceDB":{"id":"AuthServiceDB","path":"localstack/AuthServiceDB","children":{"SubnetGroup":{"id":"SubnetGroup","path":"localstack/AuthServiceDB/SubnetGroup","children":{"Default":{"id":"Default","path":"localstack/AuthServiceDB/SubnetGroup/Default","attributes":{"aws:cdk:cloudformation:type":"AWS::RDS::DBSubnetGroup","aws:cdk:cloudformation:props":{"dbSubnetGroupDescription":"Subnet group for AuthServiceDB database","subnetIds":[{"Ref":"PatientsManagementVpcPrivateSubnet1Subnet06A89DF4"},{"Ref":"PatientsManagementVpcPrivateSubnet2Subnet86CFD33A"}]}},"constructInfo":{"fqn":"aws-cdk-lib.aws_rds.CfnDBSubnetGroup","version":"2.195.0"}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_rds.SubnetGroup","version":"2.195.0","metadata":[]}},"SecurityGroup":{"id":"SecurityGroup","path":"localstack/AuthServiceDB/SecurityGroup","children":{"Resource":{"id":"Resource","path":"localstack/AuthServiceDB/SecurityGroup/Resource","attributes":{"aws:cdk:cloudformation:type":"AWS::EC2::SecurityGroup","aws:cdk:cloudformation:props":{"groupDescription":"Security group for AuthServiceDB database","securityGroupEgress":[{"cidrIp":"0.0.0.0/0","description":"Allow all outbound traffic by default","ipProtocol":"-1"}],"vpcId":{"Ref":"PatientsManagementVpc9D7C6C04"}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.CfnSecurityGroup","version":"2.195.0"}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.SecurityGroup","version":"2.195.0","metadata":[]}},"Secret":{"id":"Secret","path":"localstack/AuthServiceDB/Secret","children":{"Resource":{"id":"Resource","path":"localstack/AuthServiceDB/Secret/Resource","attributes":{"aws:cdk:cloudformation:type":"AWS::SecretsManager::Secret","aws:cdk:cloudformation:props":{"description":{"Fn::Join":["",["Generated by the CDK for stack: ",{"Ref":"AWS::StackName"}]]},"generateSecretString":{"passwordLength":30,"secretStringTemplate":"{\"username\":\"admin_user\"}","generateStringKey":"password","excludeCharacters":" %+~`#$&*()|[]{}:;<>?!'/@\"\\"}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_secretsmanager.CfnSecret","version":"2.195.0"}},"Attachment":{"id":"Attachment","path":"localstack/AuthServiceDB/Secret/Attachment","children":{"Resource":{"id":"Resource","path":"localstack/AuthServiceDB/Secret/Attachment/Resource","attributes":{"aws:cdk:cloudformation:type":"AWS::SecretsManager::SecretTargetAttachment","aws:cdk:cloudformation:props":{"secretId":{"Ref":"localstackAuthServiceDBSecretE93C53FD3fdaad7efa858a3daf9490cf0a702aeb"},"targetId":{"Ref":"AuthServiceDBC6B688BA"},"targetType":"AWS::RDS::DBInstance"}},"constructInfo":{"fqn":"aws-cdk-lib.aws_secretsmanager.CfnSecretTargetAttachment","version":"2.195.0"}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_secretsmanager.SecretTargetAttachment","version":"2.195.0","metadata":[]}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_rds.DatabaseSecret","version":"2.195.0","metadata":[]}},"Resource":{"id":"Resource","path":"localstack/AuthServiceDB/Resource","attributes":{"aws:cdk:cloudformation:type":"AWS::RDS::DBInstance","aws:cdk:cloudformation:props":{"allocatedStorage":"20","copyTagsToSnapshot":true,"dbInstanceClass":"db.t2.micro","dbName":"auth-service-db","dbSubnetGroupName":{"Ref":"AuthServiceDBSubnetGroupCFE5A552"},"engine":"postgres","engineVersion":"17","masterUsername":"admin_user","masterUserPassword":{"Fn::Join":["",["{{resolve:secretsmanager:",{"Ref":"localstackAuthServiceDBSecretE93C53FD3fdaad7efa858a3daf9490cf0a702aeb"},":SecretString:password::}}"]]},"storageType":"gp2","vpcSecurityGroups":[{"Fn::GetAtt":["AuthServiceDBSecurityGroupBE6D28EB","GroupId"]}]}},"constructInfo":{"fqn":"aws-cdk-lib.aws_rds.CfnDBInstance","version":"2.195.0"}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_rds.DatabaseInstance","version":"2.195.0","metadata":[]}},"PatientsServiceDbHealthCheck":{"id":"PatientsServiceDbHealthCheck","path":"localstack/PatientsServiceDbHealthCheck","attributes":{"aws:cdk:cloudformation:type":"AWS::Route53::HealthCheck","aws:cdk:cloudformation:props":{"healthCheckConfig":{"type":"TCP","failureThreshold":3,"ipAddress":{"Fn::GetAtt":["PatientsServiceDB9E9CC416","Endpoint.Address"]},"port":{"Fn::GetAtt":["PatientsServiceDB9E9CC416","Endpoint.Port"]},"requestInterval":30}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_route53.CfnHealthCheck","version":"2.195.0"}},"AuthServiceDbHealthCheck":{"id":"AuthServiceDbHealthCheck","path":"localstack/AuthServiceDbHealthCheck","attributes":{"aws:cdk:cloudformation:type":"AWS::Route53::HealthCheck","aws:cdk:cloudformation:props":{"healthCheckConfig":{"type":"TCP","failureThreshold":3,"ipAddress":{"Fn::GetAtt":["AuthServiceDBC6B688BA","Endpoint.Address"]},"port":{"Fn::GetAtt":["AuthServiceDBC6B688BA","Endpoint.Port"]},"requestInterval":30}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_route53.CfnHealthCheck","version":"2.195.0"}},"MskCluster":{"id":"MskCluster","path":"localstack/MskCluster","attributes":{"aws:cdk:cloudformation:type":"AWS::MSK::Cluster","aws:cdk:cloudformation:props":{"brokerNodeGroupInfo":{"clientSubnets":[{"Ref":"PatientsManagementVpcPrivateSubnet1Subnet06A89DF4"},{"Ref":"PatientsManagementVpcPrivateSubnet2Subnet86CFD33A"}],"instanceType":"kafka.m5.large","brokerAzDistribution":"DEFAULT"},"clusterName":"kafka-cluster","kafkaVersion":"3.6.0","numberOfBrokerNodes":2}},"constructInfo":{"fqn":"aws-cdk-lib.aws_msk.CfnCluster","version":"2.195.0"}},"AuthJwtSecretKey":{"id":"AuthJwtSecretKey","path":"localstack/AuthJwtSecretKey","children":{"Resource":{"id":"Resource","path":"localstack/AuthJwtSecretKey/Resource","attributes":{"aws:cdk:cloudformation:type":"AWS::SecretsManager::Secret","aws:cdk:cloudformation:props":{"name":"auth/jwt","secretString":"{\"jwtKey\":\"cEbIhLGTqq9i6QHaa4EXgfCcSlSR1fQc1Vcxzlsm1xc=\"}"}},"constructInfo":{"fqn":"aws-cdk-lib.aws_secretsmanager.CfnSecret","version":"2.195.0"}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_secretsmanager.Secret","version":"2.195.0","metadata":[]}},"AuthServiceTask":{"id":"AuthServiceTask","path":"localstack/AuthServiceTask","children":{"TaskRole":{"id":"TaskRole","path":"localstack/AuthServiceTask/TaskRole","children":{"ImportTaskRole":{"id":"ImportTaskRole","path":"localstack/AuthServiceTask/TaskRole/ImportTaskRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.195.0","metadata":[]}},"Resource":{"id":"Resource","path":"localstack/AuthServiceTask/TaskRole/Resource","attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Role","aws:cdk:cloudformation:props":{"assumeRolePolicyDocument":{"Statement":[{"Action":"sts:AssumeRole","Effect":"Allow","Principal":{"Service":"ecs-tasks.amazonaws.com"}}],"Version":"2012-10-17"}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnRole","version":"2.195.0"}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Role","version":"2.195.0","metadata":[]}},"Resource":{"id":"Resource","path":"localstack/AuthServiceTask/Resource","attributes":{"aws:cdk:cloudformation:type":"AWS::ECS::TaskDefinition","aws:cdk:cloudformation:props":{"containerDefinitions":[{"essential":true,"image":"auth-service","name":"AuthServiceContainer","portMappings":[{"containerPort":4003,"hostPort":4003,"protocol":"tcp"}],"logConfiguration":{"logDriver":"awslogs","options":{"awslogs-group":{"Ref":"AuthServiceLogGroup34125B38"},"awslogs-stream-prefix":"auth-service","awslogs-region":{"Ref":"AWS::Region"}}},"environment":[{"name":"SPRING_SQL_INIT_MODE","value":"always"},{"name":"JWT_EXPIRATION_TIME","value":"86400000"},{"name":"SPRING_DATASOURCE_URL","value":{"Fn::Join":["",["jdbc:postgresql://",{"Fn::GetAtt":["AuthServiceDBC6B688BA","Endpoint.Address"]},":",{"Fn::GetAtt":["AuthServiceDBC6B688BA","Endpoint.Port"]},"/auth-service-db"]]}},{"name":"SPRING_JPA_HIBERNATE_DDL_AUTO","value":"update"},{"name":"SPRING_DATASOURCE_HIKARI_INITIALIZATION_FAIL_TIMEOUT","value":"60000"},{"name":"SPRING_DATASOURCE_USERNAME","value":"admin_user"},{"name":"SPRING_KAFKA_BOOTSTRAP_SERVERS","value":"localhost.localstack.cloud:4510, localhost.localstack.cloud:4511, localhost.localstack.cloud:4512"}],"secrets":[{"name":"JWT_SECRET_KEY","valueFrom":{"Fn::Join":["",[{"Ref":"AuthJwtSecretKey5E574F7A"},":jwtKey::"]]}},{"name":"SPRING_DATASOURCE_PASSWORD","valueFrom":{"Fn::Join":["",[{"Ref":"AuthServiceDBSecretAttachmentF30406A9"},":password::"]]}}]}],"cpu":"256","executionRoleArn":{"Fn::GetAtt":["AuthServiceTaskExecutionRoleA1258495","Arn"]},"family":"localstackAuthServiceTask4114E6CA","memory":"512","networkMode":"awsvpc","requiresCompatibilities":["FARGATE"],"taskRoleArn":{"Fn::GetAtt":["AuthServiceTaskTaskRoleE466B974","Arn"]}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_ecs.CfnTaskDefinition","version":"2.195.0"}},"AuthServiceContainer":{"id":"AuthServiceContainer","path":"localstack/AuthServiceTask/AuthServiceContainer","constructInfo":{"fqn":"aws-cdk-lib.aws_ecs.ContainerDefinition","version":"2.195.0"}},"ExecutionRole":{"id":"ExecutionRole","path":"localstack/AuthServiceTask/ExecutionRole","children":{"ImportExecutionRole":{"id":"ImportExecutionRole","path":"localstack/AuthServiceTask/ExecutionRole/ImportExecutionRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.195.0","metadata":[]}},"Resource":{"id":"Resource","path":"localstack/AuthServiceTask/ExecutionRole/Resource","attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Role","aws:cdk:cloudformation:props":{"assumeRolePolicyDocument":{"Statement":[{"Action":"sts:AssumeRole","Effect":"Allow","Principal":{"Service":"ecs-tasks.amazonaws.com"}}],"Version":"2012-10-17"}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnRole","version":"2.195.0"}},"DefaultPolicy":{"id":"DefaultPolicy","path":"localstack/AuthServiceTask/ExecutionRole/DefaultPolicy","children":{"Resource":{"id":"Resource","path":"localstack/AuthServiceTask/ExecutionRole/DefaultPolicy/Resource","attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Policy","aws:cdk:cloudformation:props":{"policyDocument":{"Statement":[{"Action":["logs:CreateLogStream","logs:PutLogEvents"],"Effect":"Allow","Resource":{"Fn::GetAtt":["AuthServiceLogGroup34125B38","Arn"]}},{"Action":["secretsmanager:GetSecretValue","secretsmanager:DescribeSecret"],"Effect":"Allow","Resource":{"Ref":"AuthJwtSecretKey5E574F7A"}},{"Action":["secretsmanager:GetSecretValue","secretsmanager:DescribeSecret"],"Effect":"Allow","Resource":{"Ref":"AuthServiceDBSecretAttachmentF30406A9"}}],"Version":"2012-10-17"},"policyName":"AuthServiceTaskExecutionRoleDefaultPolicyF20AD0D3","roles":[{"Ref":"AuthServiceTaskExecutionRoleA1258495"}]}},"constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnPolicy","version":"2.195.0"}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Policy","version":"2.195.0","metadata":[]}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Role","version":"2.195.0","metadata":[]}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_ecs.FargateTaskDefinition","version":"2.195.0","metadata":[]}},"AuthServiceLogGroup":{"id":"AuthServiceLogGroup","path":"localstack/AuthServiceLogGroup","children":{"Resource":{"id":"Resource","path":"localstack/AuthServiceLogGroup/Resource","attributes":{"aws:cdk:cloudformation:type":"AWS::Logs::LogGroup","aws:cdk:cloudformation:props":{"logGroupName":"/ecs/auth-service","retentionInDays":1}},"constructInfo":{"fqn":"aws-cdk-lib.aws_logs.CfnLogGroup","version":"2.195.0"}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_logs.LogGroup","version":"2.195.0","metadata":[]}},"AuthService":{"id":"AuthService","path":"localstack/AuthService","children":{"Service":{"id":"Service","path":"localstack/AuthService/Service","attributes":{"aws:cdk:cloudformation:type":"AWS::ECS::Service","aws:cdk:cloudformation:props":{"cluster":{"Ref":"PatientManagementCluster98E10F8D"},"deploymentConfiguration":{"maximumPercent":200,"minimumHealthyPercent":50,"alarms":{"alarmNames":[],"enable":false,"rollback":false}},"enableEcsManagedTags":false,"launchType":"FARGATE","networkConfiguration":{"awsvpcConfiguration":{"assignPublicIp":"DISABLED","subnets":[{"Ref":"PatientsManagementVpcPrivateSubnet1Subnet06A89DF4"},{"Ref":"PatientsManagementVpcPrivateSubnet2Subnet86CFD33A"}],"securityGroups":[{"Fn::GetAtt":["AuthServiceSecurityGroup67F2FA7D","GroupId"]}]}},"serviceName":"auth-service","serviceRegistries":[{"registryArn":{"Fn::GetAtt":["AuthServiceCloudmapServiceBA6F14E5","Arn"]}}],"taskDefinition":{"Ref":"AuthServiceTask82E6680D"}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_ecs.CfnService","version":"2.195.0"}},"CloudmapService":{"id":"CloudmapService","path":"localstack/AuthService/CloudmapService","children":{"Resource":{"id":"Resource","path":"localstack/AuthService/CloudmapService/Resource","attributes":{"aws:cdk:cloudformation:type":"AWS::ServiceDiscovery::Service","aws:cdk:cloudformation:props":{"dnsConfig":{"dnsRecords":[{"type":"A","ttl":60}],"namespaceId":{"Fn::GetAtt":["PatientManagementClusterDefaultServiceDiscoveryNamespace72C5F264","Id"]},"routingPolicy":"MULTIVALUE"},"healthCheckCustomConfig":{"failureThreshold":1},"name":"auth-service","namespaceId":{"Fn::GetAtt":["PatientManagementClusterDefaultServiceDiscoveryNamespace72C5F264","Id"]}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_servicediscovery.CfnService","version":"2.195.0"}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_servicediscovery.Service","version":"2.195.0","metadata":[]}},"SecurityGroup":{"id":"SecurityGroup","path":"localstack/AuthService/SecurityGroup","children":{"Resource":{"id":"Resource","path":"localstack/AuthService/SecurityGroup/Resource","attributes":{"aws:cdk:cloudformation:type":"AWS::EC2::SecurityGroup","aws:cdk:cloudformation:props":{"groupDescription":"localstack/AuthService/SecurityGroup","securityGroupEgress":[{"cidrIp":"0.0.0.0/0","description":"Allow all outbound traffic by default","ipProtocol":"-1"}],"vpcId":{"Ref":"PatientsManagementVpc9D7C6C04"}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.CfnSecurityGroup","version":"2.195.0"}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.SecurityGroup","version":"2.195.0","metadata":[]}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_ecs.FargateService","version":"2.195.0","metadata":[]}},"BillingServiceTask":{"id":"BillingServiceTask","path":"localstack/BillingServiceTask","children":{"TaskRole":{"id":"TaskRole","path":"localstack/BillingServiceTask/TaskRole","children":{"ImportTaskRole":{"id":"ImportTaskRole","path":"localstack/BillingServiceTask/TaskRole/ImportTaskRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.195.0","metadata":[]}},"Resource":{"id":"Resource","path":"localstack/BillingServiceTask/TaskRole/Resource","attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Role","aws:cdk:cloudformation:props":{"assumeRolePolicyDocument":{"Statement":[{"Action":"sts:AssumeRole","Effect":"Allow","Principal":{"Service":"ecs-tasks.amazonaws.com"}}],"Version":"2012-10-17"}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnRole","version":"2.195.0"}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Role","version":"2.195.0","metadata":[]}},"Resource":{"id":"Resource","path":"localstack/BillingServiceTask/Resource","attributes":{"aws:cdk:cloudformation:type":"AWS::ECS::TaskDefinition","aws:cdk:cloudformation:props":{"containerDefinitions":[{"essential":true,"image":"billing-service","name":"BillingServiceContainer","portMappings":[{"containerPort":4001,"hostPort":4001,"protocol":"tcp"},{"containerPort":9001,"hostPort":9001,"protocol":"tcp"}],"logConfiguration":{"logDriver":"awslogs","options":{"awslogs-group":{"Ref":"BillingServiceLogGroupDD61E740"},"awslogs-stream-prefix":"billing-service","awslogs-region":{"Ref":"AWS::Region"}}},"environment":[{"name":"SPRING_KAFKA_BOOTSTRAP_SERVERS","value":"localhost.localstack.cloud:4510, localhost.localstack.cloud:4511, localhost.localstack.cloud:4512"}]}],"cpu":"256","executionRoleArn":{"Fn::GetAtt":["BillingServiceTaskExecutionRole11FE8DE2","Arn"]},"family":"localstackBillingServiceTaskAB0446C6","memory":"512","networkMode":"awsvpc","requiresCompatibilities":["FARGATE"],"taskRoleArn":{"Fn::GetAtt":["BillingServiceTaskTaskRole7A547BBF","Arn"]}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_ecs.CfnTaskDefinition","version":"2.195.0"}},"BillingServiceContainer":{"id":"BillingServiceContainer","path":"localstack/BillingServiceTask/BillingServiceContainer","constructInfo":{"fqn":"aws-cdk-lib.aws_ecs.ContainerDefinition","version":"2.195.0"}},"ExecutionRole":{"id":"ExecutionRole","path":"localstack/BillingServiceTask/ExecutionRole","children":{"ImportExecutionRole":{"id":"ImportExecutionRole","path":"localstack/BillingServiceTask/ExecutionRole/ImportExecutionRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.195.0","metadata":[]}},"Resource":{"id":"Resource","path":"localstack/BillingServiceTask/ExecutionRole/Resource","attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Role","aws:cdk:cloudformation:props":{"assumeRolePolicyDocument":{"Statement":[{"Action":"sts:AssumeRole","Effect":"Allow","Principal":{"Service":"ecs-tasks.amazonaws.com"}}],"Version":"2012-10-17"}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnRole","version":"2.195.0"}},"DefaultPolicy":{"id":"DefaultPolicy","path":"localstack/BillingServiceTask/ExecutionRole/DefaultPolicy","children":{"Resource":{"id":"Resource","path":"localstack/BillingServiceTask/ExecutionRole/DefaultPolicy/Resource","attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Policy","aws:cdk:cloudformation:props":{"policyDocument":{"Statement":[{"Action":["logs:CreateLogStream","logs:PutLogEvents"],"Effect":"Allow","Resource":{"Fn::GetAtt":["BillingServiceLogGroupDD61E740","Arn"]}}],"Version":"2012-10-17"},"policyName":"BillingServiceTaskExecutionRoleDefaultPolicy4F4033C9","roles":[{"Ref":"BillingServiceTaskExecutionRole11FE8DE2"}]}},"constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnPolicy","version":"2.195.0"}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Policy","version":"2.195.0","metadata":[]}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Role","version":"2.195.0","metadata":[]}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_ecs.FargateTaskDefinition","version":"2.195.0","metadata":[]}},"BillingServiceLogGroup":{"id":"BillingServiceLogGroup","path":"localstack/BillingServiceLogGroup","children":{"Resource":{"id":"Resource","path":"localstack/BillingServiceLogGroup/Resource","attributes":{"aws:cdk:cloudformation:type":"AWS::Logs::LogGroup","aws:cdk:cloudformation:props":{"logGroupName":"/ecs/billing-service","retentionInDays":1}},"constructInfo":{"fqn":"aws-cdk-lib.aws_logs.CfnLogGroup","version":"2.195.0"}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_logs.LogGroup","version":"2.195.0","metadata":[]}},"BillingService":{"id":"BillingService","path":"localstack/BillingService","children":{"Service":{"id":"Service","path":"localstack/BillingService/Service","attributes":{"aws:cdk:cloudformation:type":"AWS::ECS::Service","aws:cdk:cloudformation:props":{"cluster":{"Ref":"PatientManagementCluster98E10F8D"},"deploymentConfiguration":{"maximumPercent":200,"minimumHealthyPercent":50,"alarms":{"alarmNames":[],"enable":false,"rollback":false}},"enableEcsManagedTags":false,"launchType":"FARGATE","networkConfiguration":{"awsvpcConfiguration":{"assignPublicIp":"DISABLED","subnets":[{"Ref":"PatientsManagementVpcPrivateSubnet1Subnet06A89DF4"},{"Ref":"PatientsManagementVpcPrivateSubnet2Subnet86CFD33A"}],"securityGroups":[{"Fn::GetAtt":["BillingServiceSecurityGroup3783AD35","GroupId"]}]}},"serviceName":"billing-service","serviceRegistries":[{"registryArn":{"Fn::GetAtt":["BillingServiceCloudmapService9691C754","Arn"]}}],"taskDefinition":{"Ref":"BillingServiceTask30D9C66E"}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_ecs.CfnService","version":"2.195.0"}},"CloudmapService":{"id":"CloudmapService","path":"localstack/BillingService/CloudmapService","children":{"Resource":{"id":"Resource","path":"localstack/BillingService/CloudmapService/Resource","attributes":{"aws:cdk:cloudformation:type":"AWS::ServiceDiscovery::Service","aws:cdk:cloudformation:props":{"dnsConfig":{"dnsRecords":[{"type":"A","ttl":60}],"namespaceId":{"Fn::GetAtt":["PatientManagementClusterDefaultServiceDiscoveryNamespace72C5F264","Id"]},"routingPolicy":"MULTIVALUE"},"healthCheckCustomConfig":{"failureThreshold":1},"name":"billing-service","namespaceId":{"Fn::GetAtt":["PatientManagementClusterDefaultServiceDiscoveryNamespace72C5F264","Id"]}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_servicediscovery.CfnService","version":"2.195.0"}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_servicediscovery.Service","version":"2.195.0","metadata":[]}},"SecurityGroup":{"id":"SecurityGroup","path":"localstack/BillingService/SecurityGroup","children":{"Resource":{"id":"Resource","path":"localstack/BillingService/SecurityGroup/Resource","attributes":{"aws:cdk:cloudformation:type":"AWS::EC2::SecurityGroup","aws:cdk:cloudformation:props":{"groupDescription":"localstack/BillingService/SecurityGroup","securityGroupEgress":[{"cidrIp":"0.0.0.0/0","description":"Allow all outbound traffic by default","ipProtocol":"-1"}],"vpcId":{"Ref":"PatientsManagementVpc9D7C6C04"}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.CfnSecurityGroup","version":"2.195.0"}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.SecurityGroup","version":"2.195.0","metadata":[]}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_ecs.FargateService","version":"2.195.0","metadata":[]}},"AnalyticsServiceTask":{"id":"AnalyticsServiceTask","path":"localstack/AnalyticsServiceTask","children":{"TaskRole":{"id":"TaskRole","path":"localstack/AnalyticsServiceTask/TaskRole","children":{"ImportTaskRole":{"id":"ImportTaskRole","path":"localstack/AnalyticsServiceTask/TaskRole/ImportTaskRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.195.0","metadata":[]}},"Resource":{"id":"Resource","path":"localstack/AnalyticsServiceTask/TaskRole/Resource","attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Role","aws:cdk:cloudformation:props":{"assumeRolePolicyDocument":{"Statement":[{"Action":"sts:AssumeRole","Effect":"Allow","Principal":{"Service":"ecs-tasks.amazonaws.com"}}],"Version":"2012-10-17"}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnRole","version":"2.195.0"}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Role","version":"2.195.0","metadata":[]}},"Resource":{"id":"Resource","path":"localstack/AnalyticsServiceTask/Resource","attributes":{"aws:cdk:cloudformation:type":"AWS::ECS::TaskDefinition","aws:cdk:cloudformation:props":{"containerDefinitions":[{"essential":true,"image":"analytics-service","name":"AnalyticsServiceContainer","portMappings":[{"containerPort":4002,"hostPort":4002,"protocol":"tcp"}],"logConfiguration":{"logDriver":"awslogs","options":{"awslogs-group":{"Ref":"AnalyticsServiceLogGroupBD82F12A"},"awslogs-stream-prefix":"analytics-service","awslogs-region":{"Ref":"AWS::Region"}}},"environment":[{"name":"SPRING_KAFKA_BOOTSTRAP_SERVERS","value":"localhost.localstack.cloud:4510, localhost.localstack.cloud:4511, localhost.localstack.cloud:4512"}]}],"cpu":"256","executionRoleArn":{"Fn::GetAtt":["AnalyticsServiceTaskExecutionRoleBAF654B2","Arn"]},"family":"localstackAnalyticsServiceTask353A5B10","memory":"512","networkMode":"awsvpc","requiresCompatibilities":["FARGATE"],"taskRoleArn":{"Fn::GetAtt":["AnalyticsServiceTaskTaskRole1ABB10CB","Arn"]}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_ecs.CfnTaskDefinition","version":"2.195.0"}},"AnalyticsServiceContainer":{"id":"AnalyticsServiceContainer","path":"localstack/AnalyticsServiceTask/AnalyticsServiceContainer","constructInfo":{"fqn":"aws-cdk-lib.aws_ecs.ContainerDefinition","version":"2.195.0"}},"ExecutionRole":{"id":"ExecutionRole","path":"localstack/AnalyticsServiceTask/ExecutionRole","children":{"ImportExecutionRole":{"id":"ImportExecutionRole","path":"localstack/AnalyticsServiceTask/ExecutionRole/ImportExecutionRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.195.0","metadata":[]}},"Resource":{"id":"Resource","path":"localstack/AnalyticsServiceTask/ExecutionRole/Resource","attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Role","aws:cdk:cloudformation:props":{"assumeRolePolicyDocument":{"Statement":[{"Action":"sts:AssumeRole","Effect":"Allow","Principal":{"Service":"ecs-tasks.amazonaws.com"}}],"Version":"2012-10-17"}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnRole","version":"2.195.0"}},"DefaultPolicy":{"id":"DefaultPolicy","path":"localstack/AnalyticsServiceTask/ExecutionRole/DefaultPolicy","children":{"Resource":{"id":"Resource","path":"localstack/AnalyticsServiceTask/ExecutionRole/DefaultPolicy/Resource","attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Policy","aws:cdk:cloudformation:props":{"policyDocument":{"Statement":[{"Action":["logs:CreateLogStream","logs:PutLogEvents"],"Effect":"Allow","Resource":{"Fn::GetAtt":["AnalyticsServiceLogGroupBD82F12A","Arn"]}}],"Version":"2012-10-17"},"policyName":"AnalyticsServiceTaskExecutionRoleDefaultPolicy99868928","roles":[{"Ref":"AnalyticsServiceTaskExecutionRoleBAF654B2"}]}},"constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnPolicy","version":"2.195.0"}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Policy","version":"2.195.0","metadata":[]}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Role","version":"2.195.0","metadata":[]}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_ecs.FargateTaskDefinition","version":"2.195.0","metadata":[]}},"AnalyticsServiceLogGroup":{"id":"AnalyticsServiceLogGroup","path":"localstack/AnalyticsServiceLogGroup","children":{"Resource":{"id":"Resource","path":"localstack/AnalyticsServiceLogGroup/Resource","attributes":{"aws:cdk:cloudformation:type":"AWS::Logs::LogGroup","aws:cdk:cloudformation:props":{"logGroupName":"/ecs/analytics-service","retentionInDays":1}},"constructInfo":{"fqn":"aws-cdk-lib.aws_logs.CfnLogGroup","version":"2.195.0"}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_logs.LogGroup","version":"2.195.0","metadata":[]}},"AnalyticsService":{"id":"AnalyticsService","path":"localstack/AnalyticsService","children":{"Service":{"id":"Service","path":"localstack/AnalyticsService/Service","attributes":{"aws:cdk:cloudformation:type":"AWS::ECS::Service","aws:cdk:cloudformation:props":{"cluster":{"Ref":"PatientManagementCluster98E10F8D"},"deploymentConfiguration":{"maximumPercent":200,"minimumHealthyPercent":50,"alarms":{"alarmNames":[],"enable":false,"rollback":false}},"enableEcsManagedTags":false,"launchType":"FARGATE","networkConfiguration":{"awsvpcConfiguration":{"assignPublicIp":"DISABLED","subnets":[{"Ref":"PatientsManagementVpcPrivateSubnet1Subnet06A89DF4"},{"Ref":"PatientsManagementVpcPrivateSubnet2Subnet86CFD33A"}],"securityGroups":[{"Fn::GetAtt":["AnalyticsServiceSecurityGroupBA6AE98A","GroupId"]}]}},"serviceName":"analytics-service","serviceRegistries":[{"registryArn":{"Fn::GetAtt":["AnalyticsServiceCloudmapService37E505E7","Arn"]}}],"taskDefinition":{"Ref":"AnalyticsServiceTaskC3AFBC47"}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_ecs.CfnService","version":"2.195.0"}},"CloudmapService":{"id":"CloudmapService","path":"localstack/AnalyticsService/CloudmapService","children":{"Resource":{"id":"Resource","path":"localstack/AnalyticsService/CloudmapService/Resource","attributes":{"aws:cdk:cloudformation:type":"AWS::ServiceDiscovery::Service","aws:cdk:cloudformation:props":{"dnsConfig":{"dnsRecords":[{"type":"A","ttl":60}],"namespaceId":{"Fn::GetAtt":["PatientManagementClusterDefaultServiceDiscoveryNamespace72C5F264","Id"]},"routingPolicy":"MULTIVALUE"},"healthCheckCustomConfig":{"failureThreshold":1},"name":"analytics-service","namespaceId":{"Fn::GetAtt":["PatientManagementClusterDefaultServiceDiscoveryNamespace72C5F264","Id"]}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_servicediscovery.CfnService","version":"2.195.0"}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_servicediscovery.Service","version":"2.195.0","metadata":[]}},"SecurityGroup":{"id":"SecurityGroup","path":"localstack/AnalyticsService/SecurityGroup","children":{"Resource":{"id":"Resource","path":"localstack/AnalyticsService/SecurityGroup/Resource","attributes":{"aws:cdk:cloudformation:type":"AWS::EC2::SecurityGroup","aws:cdk:cloudformation:props":{"groupDescription":"localstack/AnalyticsService/SecurityGroup","securityGroupEgress":[{"cidrIp":"0.0.0.0/0","description":"Allow all outbound traffic by default","ipProtocol":"-1"}],"vpcId":{"Ref":"PatientsManagementVpc9D7C6C04"}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.CfnSecurityGroup","version":"2.195.0"}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.SecurityGroup","version":"2.195.0","metadata":[]}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_ecs.FargateService","version":"2.195.0","metadata":[]}},"PatientServiceTask":{"id":"PatientServiceTask","path":"localstack/PatientServiceTask","children":{"TaskRole":{"id":"TaskRole","path":"localstack/PatientServiceTask/TaskRole","children":{"ImportTaskRole":{"id":"ImportTaskRole","path":"localstack/PatientServiceTask/TaskRole/ImportTaskRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.195.0","metadata":[]}},"Resource":{"id":"Resource","path":"localstack/PatientServiceTask/TaskRole/Resource","attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Role","aws:cdk:cloudformation:props":{"assumeRolePolicyDocument":{"Statement":[{"Action":"sts:AssumeRole","Effect":"Allow","Principal":{"Service":"ecs-tasks.amazonaws.com"}}],"Version":"2012-10-17"}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnRole","version":"2.195.0"}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Role","version":"2.195.0","metadata":[]}},"Resource":{"id":"Resource","path":"localstack/PatientServiceTask/Resource","attributes":{"aws:cdk:cloudformation:type":"AWS::ECS::TaskDefinition","aws:cdk:cloudformation:props":{"containerDefinitions":[{"essential":true,"image":"patients-service","name":"PatientServiceContainer","portMappings":[{"containerPort":4000,"hostPort":4000,"protocol":"tcp"}],"logConfiguration":{"logDriver":"awslogs","options":{"awslogs-group":{"Ref":"PatientServiceLogGroup4A5C3809"},"awslogs-stream-prefix":"patients-service","awslogs-region":{"Ref":"AWS::Region"}}},"environment":[{"name":"BILLING_SERVICE_GRPC_PORT","value":"9001"},{"name":"SPRING_SQL_INIT_MODE","value":"always"},{"name":"SPRING_DATASOURCE_URL","value":{"Fn::Join":["",["jdbc:postgresql://",{"Fn::GetAtt":["PatientsServiceDB9E9CC416","Endpoint.Address"]},":",{"Fn::GetAtt":["PatientsServiceDB9E9CC416","Endpoint.Port"]},"/patients-service-db"]]}},{"name":"SPRING_JPA_HIBERNATE_DDL_AUTO","value":"update"},{"name":"SPRING_DATASOURCE_HIKARI_INITIALIZATION_FAIL_TIMEOUT","value":"60000"},{"name":"SPRING_DATASOURCE_USERNAME","value":"admin_user"},{"name":"SPRING_KAFKA_BOOTSTRAP_SERVERS","value":"localhost.localstack.cloud:4510, localhost.localstack.cloud:4511, localhost.localstack.cloud:4512"},{"name":"BILLING_SERVICE_ADDRESS","value":"billing-service.patients-management"}],"secrets":[{"name":"SPRING_DATASOURCE_PASSWORD","valueFrom":{"Fn::Join":["",[{"Ref":"PatientsServiceDBSecretAttachment84FB4346"},":password::"]]}}]}],"cpu":"256","executionRoleArn":{"Fn::GetAtt":["PatientServiceTaskExecutionRole3782903B","Arn"]},"family":"localstackPatientServiceTask2770C053","memory":"512","networkMode":"awsvpc","requiresCompatibilities":["FARGATE"],"taskRoleArn":{"Fn::GetAtt":["PatientServiceTaskTaskRole4FB5B4E2","Arn"]}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_ecs.CfnTaskDefinition","version":"2.195.0"}},"PatientServiceContainer":{"id":"PatientServiceContainer","path":"localstack/PatientServiceTask/PatientServiceContainer","constructInfo":{"fqn":"aws-cdk-lib.aws_ecs.ContainerDefinition","version":"2.195.0"}},"ExecutionRole":{"id":"ExecutionRole","path":"localstack/PatientServiceTask/ExecutionRole","children":{"ImportExecutionRole":{"id":"ImportExecutionRole","path":"localstack/PatientServiceTask/ExecutionRole/ImportExecutionRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.195.0","metadata":[]}},"Resource":{"id":"Resource","path":"localstack/PatientServiceTask/ExecutionRole/Resource","attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Role","aws:cdk:cloudformation:props":{"assumeRolePolicyDocument":{"Statement":[{"Action":"sts:AssumeRole","Effect":"Allow","Principal":{"Service":"ecs-tasks.amazonaws.com"}}],"Version":"2012-10-17"}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnRole","version":"2.195.0"}},"DefaultPolicy":{"id":"DefaultPolicy","path":"localstack/PatientServiceTask/ExecutionRole/DefaultPolicy","children":{"Resource":{"id":"Resource","path":"localstack/PatientServiceTask/ExecutionRole/DefaultPolicy/Resource","attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Policy","aws:cdk:cloudformation:props":{"policyDocument":{"Statement":[{"Action":["logs:CreateLogStream","logs:PutLogEvents"],"Effect":"Allow","Resource":{"Fn::GetAtt":["PatientServiceLogGroup4A5C3809","Arn"]}},{"Action":["secretsmanager:GetSecretValue","secretsmanager:DescribeSecret"],"Effect":"Allow","Resource":{"Ref":"PatientsServiceDBSecretAttachment84FB4346"}}],"Version":"2012-10-17"},"policyName":"PatientServiceTaskExecutionRoleDefaultPolicy3866E91E","roles":[{"Ref":"PatientServiceTaskExecutionRole3782903B"}]}},"constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnPolicy","version":"2.195.0"}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Policy","version":"2.195.0","metadata":[]}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Role","version":"2.195.0","metadata":[]}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_ecs.FargateTaskDefinition","version":"2.195.0","metadata":[]}},"PatientServiceLogGroup":{"id":"PatientServiceLogGroup","path":"localstack/PatientServiceLogGroup","children":{"Resource":{"id":"Resource","path":"localstack/PatientServiceLogGroup/Resource","attributes":{"aws:cdk:cloudformation:type":"AWS::Logs::LogGroup","aws:cdk:cloudformation:props":{"logGroupName":"/ecs/patients-service","retentionInDays":1}},"constructInfo":{"fqn":"aws-cdk-lib.aws_logs.CfnLogGroup","version":"2.195.0"}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_logs.LogGroup","version":"2.195.0","metadata":[]}},"PatientService":{"id":"PatientService","path":"localstack/PatientService","children":{"Service":{"id":"Service","path":"localstack/PatientService/Service","attributes":{"aws:cdk:cloudformation:type":"AWS::ECS::Service","aws:cdk:cloudformation:props":{"cluster":{"Ref":"PatientManagementCluster98E10F8D"},"deploymentConfiguration":{"maximumPercent":200,"minimumHealthyPercent":50,"alarms":{"alarmNames":[],"enable":false,"rollback":false}},"enableEcsManagedTags":false,"launchType":"FARGATE","networkConfiguration":{"awsvpcConfiguration":{"assignPublicIp":"DISABLED","subnets":[{"Ref":"PatientsManagementVpcPrivateSubnet1Subnet06A89DF4"},{"Ref":"PatientsManagementVpcPrivateSubnet2Subnet86CFD33A"}],"securityGroups":[{"Fn::GetAtt":["PatientServiceSecurityGroup547BE1F2","GroupId"]}]}},"serviceName":"patients-service","serviceRegistries":[{"registryArn":{"Fn::GetAtt":["PatientServiceCloudmapService151F234D","Arn"]}}],"taskDefinition":{"Ref":"PatientServiceTaskF865B565"}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_ecs.CfnService","version":"2.195.0"}},"CloudmapService":{"id":"CloudmapService","path":"localstack/PatientService/CloudmapService","children":{"Resource":{"id":"Resource","path":"localstack/PatientService/CloudmapService/Resource","attributes":{"aws:cdk:cloudformation:type":"AWS::ServiceDiscovery::Service","aws:cdk:cloudformation:props":{"dnsConfig":{"dnsRecords":[{"type":"A","ttl":60}],"namespaceId":{"Fn::GetAtt":["PatientManagementClusterDefaultServiceDiscoveryNamespace72C5F264","Id"]},"routingPolicy":"MULTIVALUE"},"healthCheckCustomConfig":{"failureThreshold":1},"name":"patients-service","namespaceId":{"Fn::GetAtt":["PatientManagementClusterDefaultServiceDiscoveryNamespace72C5F264","Id"]}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_servicediscovery.CfnService","version":"2.195.0"}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_servicediscovery.Service","version":"2.195.0","metadata":[]}},"SecurityGroup":{"id":"SecurityGroup","path":"localstack/PatientService/SecurityGroup","children":{"Resource":{"id":"Resource","path":"localstack/PatientService/SecurityGroup/Resource","attributes":{"aws:cdk:cloudformation:type":"AWS::EC2::SecurityGroup","aws:cdk:cloudformation:props":{"groupDescription":"localstack/PatientService/SecurityGroup","securityGroupEgress":[{"cidrIp":"0.0.0.0/0","description":"Allow all outbound traffic by default","ipProtocol":"-1"}],"vpcId":{"Ref":"PatientsManagementVpc9D7C6C04"}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.CfnSecurityGroup","version":"2.195.0"}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.SecurityGroup","version":"2.195.0","metadata":[]}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_ecs.FargateService","version":"2.195.0","metadata":[]}},"ApiGatewayTask":{"id":"ApiGatewayTask","path":"localstack/ApiGatewayTask","children":{"TaskRole":{"id":"TaskRole","path":"localstack/ApiGatewayTask/TaskRole","children":{"ImportTaskRole":{"id":"ImportTaskRole","path":"localstack/ApiGatewayTask/TaskRole/ImportTaskRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.195.0","metadata":[]}},"Resource":{"id":"Resource","path":"localstack/ApiGatewayTask/TaskRole/Resource","attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Role","aws:cdk:cloudformation:props":{"assumeRolePolicyDocument":{"Statement":[{"Action":"sts:AssumeRole","Effect":"Allow","Principal":{"Service":"ecs-tasks.amazonaws.com"}}],"Version":"2012-10-17"}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnRole","version":"2.195.0"}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Role","version":"2.195.0","metadata":[]}},"Resource":{"id":"Resource","path":"localstack/ApiGatewayTask/Resource","attributes":{"aws:cdk:cloudformation:type":"AWS::ECS::TaskDefinition","aws:cdk:cloudformation:props":{"containerDefinitions":[{"essential":true,"image":"api-gateway","name":"ApiGatewayContainer","portMappings":[{"containerPort":4004,"hostPort":4004,"protocol":"tcp"}],"logConfiguration":{"logDriver":"awslogs","options":{"awslogs-group":{"Ref":"ApiGatewayLogGroupA9770429"},"awslogs-stream-prefix":"api-gateway","awslogs-region":{"Ref":"AWS::Region"}}},"environment":[{"name":"LOGGING_LEVEL_ORG_SPRINGFRAMEWORK_CLOUD_GATEWAY","value":"TRACE"},{"name":"LOGGING_LEVEL_ROOT","value":"DEBUG"},{"name":"SPRING_PROFILES_ACTIVE","value":"prod"},{"name":"AUTH_SERVICE_URL","value":"http://auth-service.patients-management:4003/auth"},{"name":"SPRING_KAFKA_BOOTSTRAP_SERVERS","value":"localhost.localstack.cloud:4510, localhost.localstack.cloud:4511, localhost.localstack.cloud:4512"}]}],"cpu":"256","executionRoleArn":{"Fn::GetAtt":["ApiGatewayTaskExecutionRoleEFC2C1CC","Arn"]},"family":"localstackApiGatewayTask50AB2DC7","memory":"512","networkMode":"awsvpc","requiresCompatibilities":["FARGATE"],"taskRoleArn":{"Fn::GetAtt":["ApiGatewayTaskTaskRole067DCD80","Arn"]}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_ecs.CfnTaskDefinition","version":"2.195.0"}},"ApiGatewayContainer":{"id":"ApiGatewayContainer","path":"localstack/ApiGatewayTask/ApiGatewayContainer","constructInfo":{"fqn":"aws-cdk-lib.aws_ecs.ContainerDefinition","version":"2.195.0"}},"ExecutionRole":{"id":"ExecutionRole","path":"localstack/ApiGatewayTask/ExecutionRole","children":{"ImportExecutionRole":{"id":"ImportExecutionRole","path":"localstack/ApiGatewayTask/ExecutionRole/ImportExecutionRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.195.0","metadata":[]}},"Resource":{"id":"Resource","path":"localstack/ApiGatewayTask/ExecutionRole/Resource","attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Role","aws:cdk:cloudformation:props":{"assumeRolePolicyDocument":{"Statement":[{"Action":"sts:AssumeRole","Effect":"Allow","Principal":{"Service":"ecs-tasks.amazonaws.com"}}],"Version":"2012-10-17"}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnRole","version":"2.195.0"}},"DefaultPolicy":{"id":"DefaultPolicy","path":"localstack/ApiGatewayTask/ExecutionRole/DefaultPolicy","children":{"Resource":{"id":"Resource","path":"localstack/ApiGatewayTask/ExecutionRole/DefaultPolicy/Resource","attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Policy","aws:cdk:cloudformation:props":{"policyDocument":{"Statement":[{"Action":["logs:CreateLogStream","logs:PutLogEvents"],"Effect":"Allow","Resource":{"Fn::GetAtt":["ApiGatewayLogGroupA9770429","Arn"]}}],"Version":"2012-10-17"},"policyName":"ApiGatewayTaskExecutionRoleDefaultPolicy7DA205A3","roles":[{"Ref":"ApiGatewayTaskExecutionRoleEFC2C1CC"}]}},"constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnPolicy","version":"2.195.0"}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Policy","version":"2.195.0","metadata":[]}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Role","version":"2.195.0","metadata":[]}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_ecs.FargateTaskDefinition","version":"2.195.0","metadata":[]}},"ApiGatewayLogGroup":{"id":"ApiGatewayLogGroup","path":"localstack/ApiGatewayLogGroup","children":{"Resource":{"id":"Resource","path":"localstack/ApiGatewayLogGroup/Resource","attributes":{"aws:cdk:cloudformation:type":"AWS::Logs::LogGroup","aws:cdk:cloudformation:props":{"logGroupName":"/ecs/api-gateway","retentionInDays":1}},"constructInfo":{"fqn":"aws-cdk-lib.aws_logs.CfnLogGroup","version":"2.195.0"}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_logs.LogGroup","version":"2.195.0","metadata":[]}},"ApiGateway":{"id":"ApiGateway","path":"localstack/ApiGateway","children":{"LB":{"id":"LB","path":"localstack/ApiGateway/LB","children":{"Resource":{"id":"Resource","path":"localstack/ApiGateway/LB/Resource","attributes":{"aws:cdk:cloudformation:type":"AWS::ElasticLoadBalancingV2::LoadBalancer","aws:cdk:cloudformation:props":{"loadBalancerAttributes":[{"key":"deletion_protection.enabled","value":"false"}],"scheme":"internet-facing","securityGroups":[{"Fn::GetAtt":["ApiGatewayLBSecurityGroupFC9EF786","GroupId"]}],"subnets":[{"Ref":"PatientsManagementVpcPublicSubnet1Subnet65B50443"},{"Ref":"PatientsManagementVpcPublicSubnet2Subnet9C8942F5"}],"type":"application"}},"constructInfo":{"fqn":"aws-cdk-lib.aws_elasticloadbalancingv2.CfnLoadBalancer","version":"2.195.0"}},"SecurityGroup":{"id":"SecurityGroup","path":"localstack/ApiGateway/LB/SecurityGroup","children":{"Resource":{"id":"Resource","path":"localstack/ApiGateway/LB/SecurityGroup/Resource","attributes":{"aws:cdk:cloudformation:type":"AWS::EC2::SecurityGroup","aws:cdk:cloudformation:props":{"groupDescription":"Automatically created Security Group for ELB localstackApiGatewayLBAC699808","securityGroupIngress":[{"cidrIp":"0.0.0.0/0","ipProtocol":"tcp","fromPort":80,"toPort":80,"description":"Allow from anyone on port 80"}],"vpcId":{"Ref":"PatientsManagementVpc9D7C6C04"}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.CfnSecurityGroup","version":"2.195.0"}},"to localstackApiGatewayServiceSecurityGroup9A13EB26:4004":{"id":"to localstackApiGatewayServiceSecurityGroup9A13EB26:4004","path":"localstack/ApiGateway/LB/SecurityGroup/to localstackApiGatewayServiceSecurityGroup9A13EB26:4004","attributes":{"aws:cdk:cloudformation:type":"AWS::EC2::SecurityGroupEgress","aws:cdk:cloudformation:props":{"description":"Load balancer to target","destinationSecurityGroupId":{"Fn::GetAtt":["ApiGatewayServiceSecurityGroup823D138F","GroupId"]},"fromPort":4004,"groupId":{"Fn::GetAtt":["ApiGatewayLBSecurityGroupFC9EF786","GroupId"]},"ipProtocol":"tcp","toPort":4004}},"constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.CfnSecurityGroupEgress","version":"2.195.0"}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.SecurityGroup","version":"2.195.0","metadata":[]}},"PublicListener":{"id":"PublicListener","path":"localstack/ApiGateway/LB/PublicListener","children":{"Resource":{"id":"Resource","path":"localstack/ApiGateway/LB/PublicListener/Resource","attributes":{"aws:cdk:cloudformation:type":"AWS::ElasticLoadBalancingV2::Listener","aws:cdk:cloudformation:props":{"defaultActions":[{"type":"forward","targetGroupArn":{"Ref":"ApiGatewayLBPublicListenerECSGroup3781984F"}}],"loadBalancerArn":{"Ref":"ApiGatewayLB314A71CA"},"port":80,"protocol":"HTTP"}},"constructInfo":{"fqn":"aws-cdk-lib.aws_elasticloadbalancingv2.CfnListener","version":"2.195.0"}},"ECSGroup":{"id":"ECSGroup","path":"localstack/ApiGateway/LB/PublicListener/ECSGroup","children":{"Resource":{"id":"Resource","path":"localstack/ApiGateway/LB/PublicListener/ECSGroup/Resource","attributes":{"aws:cdk:cloudformation:type":"AWS::ElasticLoadBalancingV2::TargetGroup","aws:cdk:cloudformation:props":{"port":80,"protocol":"HTTP","targetGroupAttributes":[{"key":"stickiness.enabled","value":"false"}],"targetType":"ip","vpcId":{"Ref":"PatientsManagementVpc9D7C6C04"}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_elasticloadbalancingv2.CfnTargetGroup","version":"2.195.0"}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_elasticloadbalancingv2.ApplicationTargetGroup","version":"2.195.0"}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_elasticloadbalancingv2.ApplicationListener","version":"2.195.0","metadata":[]}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_elasticloadbalancingv2.ApplicationLoadBalancer","version":"2.195.0","metadata":[]}},"LoadBalancerDNS":{"id":"LoadBalancerDNS","path":"localstack/ApiGateway/LoadBalancerDNS","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.195.0"}},"ServiceURL":{"id":"ServiceURL","path":"localstack/ApiGateway/ServiceURL","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.195.0"}},"Service":{"id":"Service","path":"localstack/ApiGateway/Service","children":{"Service":{"id":"Service","path":"localstack/ApiGateway/Service/Service","attributes":{"aws:cdk:cloudformation:type":"AWS::ECS::Service","aws:cdk:cloudformation:props":{"cluster":{"Ref":"PatientManagementCluster98E10F8D"},"deploymentConfiguration":{"maximumPercent":200,"minimumHealthyPercent":50,"alarms":{"alarmNames":[],"enable":false,"rollback":false}},"desiredCount":1,"enableEcsManagedTags":false,"healthCheckGracePeriodSeconds":60,"launchType":"FARGATE","loadBalancers":[{"targetGroupArn":{"Ref":"ApiGatewayLBPublicListenerECSGroup3781984F"},"containerName":"ApiGatewayContainer","containerPort":4004}],"networkConfiguration":{"awsvpcConfiguration":{"assignPublicIp":"DISABLED","subnets":[{"Ref":"PatientsManagementVpcPrivateSubnet1Subnet06A89DF4"},{"Ref":"PatientsManagementVpcPrivateSubnet2Subnet86CFD33A"}],"securityGroups":[{"Fn::GetAtt":["ApiGatewayServiceSecurityGroup823D138F","GroupId"]}]}},"serviceName":"api-gateway","taskDefinition":{"Ref":"ApiGatewayTask3752F926"}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_ecs.CfnService","version":"2.195.0"}},"SecurityGroup":{"id":"SecurityGroup","path":"localstack/ApiGateway/Service/SecurityGroup","children":{"Resource":{"id":"Resource","path":"localstack/ApiGateway/Service/SecurityGroup/Resource","attributes":{"aws:cdk:cloudformation:type":"AWS::EC2::SecurityGroup","aws:cdk:cloudformation:props":{"groupDescription":"localstack/ApiGateway/Service/SecurityGroup","securityGroupEgress":[{"cidrIp":"0.0.0.0/0","description":"Allow all outbound traffic by default","ipProtocol":"-1"}],"vpcId":{"Ref":"PatientsManagementVpc9D7C6C04"}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.CfnSecurityGroup","version":"2.195.0"}},"from localstackApiGatewayLBSecurityGroupB6671E72:4004":{"id":"from localstackApiGatewayLBSecurityGroupB6671E72:4004","path":"localstack/ApiGateway/Service/SecurityGroup/from localstackApiGatewayLBSecurityGroupB6671E72:4004","attributes":{"aws:cdk:cloudformation:type":"AWS::EC2::SecurityGroupIngress","aws:cdk:cloudformation:props":{"description":"Load balancer to target","fromPort":4004,"groupId":{"Fn::GetAtt":["ApiGatewayServiceSecurityGroup823D138F","GroupId"]},"ipProtocol":"tcp","sourceSecurityGroupId":{"Fn::GetAtt":["ApiGatewayLBSecurityGroupFC9EF786","GroupId"]},"toPort":4004}},"constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.CfnSecurityGroupIngress","version":"2.195.0"}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.SecurityGroup","version":"2.195.0","metadata":[]}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_ecs.FargateService","version":"2.195.0","metadata":[]}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_ecs_patterns.ApplicationLoadBalancedFargateService","version":"2.195.0"}}},"constructInfo":{"fqn":"aws-cdk-lib.Stack","version":"2.195.0"}},"Tree":{"id":"Tree","path":"Tree","constructInfo":{"fqn":"constructs.Construct","version":"10.4.2"}}},"constructInfo":{"fqn":"aws-cdk-lib.App","version":"2.195.0"}}}